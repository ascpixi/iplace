---
import Button from './Button.astro';
import { END_DATE } from '../config';

export interface Props {
  frameId: number;
  title: string;
  url: string;
  availableTiles: number;
  isPending?: boolean;
}

const { frameId, title, url, availableTiles, isPending = false } = Astro.props;
const isAfterEndDate = new Date() >= new Date(END_DATE);
---

<div class="frame-item">
  <div class="frame-info">
    <strong>{title}</strong><br />
    <small>{isPending ? 'Pending approval!' : `Available tiles: ${availableTiles}`}</small>
  </div>
  {availableTiles > 0 && !isAfterEndDate && (
    <Button 
      class="btn-place-tile" 
      data-frame-id={frameId.toString()}
      data-original-text={`Place tile (${availableTiles} available)`}
    >
      Place tile ({availableTiles} available)
    </Button>
  )}
</div>

<style>
  .frame-item {
    border: 2px solid #000;
    padding: 0.8em;
    margin: 0.5em 0;
    background: #fff;
    
    .frame-info {
      margin-bottom: 0.5em;
      
      strong {
        color: #000;
      }
      
      small {
        color: #000;
      }
    }
  }
</style>
